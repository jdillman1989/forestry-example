---
layout: archive
title: Search Schools
---

<script type="text/javascript">
	jQuery(document).ready(function($) {
		$.urlParam = function(name){
			var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
			return results[1] || 0;
		}

		var searchTerm = decodeURIComponent($.urlParam('s'));
		console.log(searchTerm);
		if(searchTerm.length > 1){
			$.ajax({
				type: 'GET',
				url: '/search.php', // bug with webtasks won't let me authenticate :(
				data: {s:searchTerm},
				complete: function(response) {
					var results = JSON.parse(response.responseText);
					var html = '';
					for (var i = 0; i < results['hits'].length; i++) {
						if(results['hits'][i].type == 'document'){
							var thisPrograms = results['hits'][i].programs.join(', ');
							html += '<article class="result">\
										<a href="' + results['hits'][i].url + '" class="result-header">\
											<h3>' + results['hits'][i].title + '</h3>\
											<div class="result-logo" style="\
												background-image: url(' + results['hits'][i].logo + ');\
												background-repeat: no-repeat;\
												background-position: left center;\
												background-size: contain;" alt="{{ page.title }}">\
											</div>\
										</a>\
										<div class="result-content">\
											<p><strong>Score:</strong> ' + results['hits'][i].score + '</p>\
											<p><strong>Programs:</strong> ' + thisPrograms + '</p>\
											<a href="' + results['hits'][i].url + '" class="fr-button">Request Info</a>\
										</div>\
									</article>';
						}
					}
					$('.content-container').html(html);
				}
			});
		}
	});
</script>
